# Tasks: 幼稚園児向け直感的タイマー

**Input**: Design documents from `/specs/002-title-description-1/`
**Prerequisites**: plan.md, research.md, data-model.md, contracts/

## 実行方針
- **Playwright MCP**: 各タスク完了後に動作確認を実施
- **段階的実装**: 小さな単位で実装→テスト→確認のサイクル
- **チェック機能**: タスク消化時に自動チェックを実行
- **分かりやすさ**: 各タスクの目的と期待結果を明確化

## 実行フロー
```
1. タスク実行
2. Playwright MCPで動作確認
3. 期待結果との照合
4. 問題があれば修正
5. 次のタスクへ進行
```

## Phase 3.1: セットアップ
- [ ] T001 プロジェクト構造の確認と整理
- [ ] T002 既存コードの分析と新機能との統合計画
- [ ] T003 [P] Playwright MCPのセットアップとテスト環境構築

## Phase 3.2: テスト設計（TDD）⚠️ 実装前に必須
**重要: これらのテストを先に作成し、失敗することを確認してから実装開始**
- [ ] T004 [P] タイマー開始のE2Eテスト作成
- [ ] T005 [P] ブロック削除のE2Eテスト作成
- [ ] T006 [P] 色変更のE2Eテスト作成
- [ ] T007 [P] タイマー完了のE2Eテスト作成
- [ ] T008 [P] レスポンシブデザインのE2Eテスト作成

## Phase 3.3: コア実装（テストが失敗してから開始）
- [ ] T009 新しいブロックシステムの実装（60個×3セクション）
- [ ] T010 1秒間隔のブロック削除機能実装
- [ ] T011 1分ごとの色変更機能実装
- [ ] T012 タイマー状態管理の更新
- [ ] T013 ブロックアニメーションの実装
- [ ] T014 完了時の視覚・聴覚フィードバック実装

## Phase 3.4: UI/UX改善
- [ ] T015 幼稚園児向けの直感的なデザイン調整
- [ ] T016 アクセシビリティ機能の実装
- [ ] T017 レスポンシブデザインの最適化
- [ ] T018 エラーハンドリングとユーザーフィードバック

## Phase 3.5: 最終確認とポリッシュ
- [ ] T019 [P] 全機能の統合テスト実行
- [ ] T020 [P] パフォーマンステスト（60fps確認）
- [ ] T021 [P] アクセシビリティテスト実行
- [ ] T022 [P] 異なるデバイスでの動作確認
- [ ] T023 ドキュメント更新とクリーンアップ

## 各タスクの詳細

### T001: プロジェクト構造の確認と整理
**目的**: 既存コードベースを分析し、新機能との統合点を特定
**ファイル**: 既存の `src/js/`, `styles.css`, `index.html`
**期待結果**: 現在の実装状況の把握と変更計画の策定
**Playwright確認**: 現在のアプリケーションが正常に動作することを確認

### T002: 既存コードの分析と新機能との統合計画
**目的**: 既存の3ブロックシステムから180ブロックシステムへの移行計画
**ファイル**: `src/js/blocks.js`, `src/js/timer.js`, `src/js/controls.js`
**期待結果**: 段階的な移行計画の策定
**Playwright確認**: 既存機能の動作確認

### T003: Playwright MCPのセットアップとテスト環境構築
**目的**: 自動テスト環境の構築
**ファイル**: テスト設定ファイル
**期待結果**: Playwright MCPが正常に動作し、テストが実行可能
**Playwright確認**: テスト環境の動作確認

### T004: タイマー開始のE2Eテスト作成
**目的**: タイマー開始機能のテスト
**ファイル**: `tests/e2e/timer-start.spec.js`
**期待結果**: テストが失敗する（実装前のため）
**Playwright確認**: テストの実行と失敗確認

### T005: ブロック削除のE2Eテスト作成
**目的**: 1秒ごとのブロック削除機能のテスト
**ファイル**: `tests/e2e/block-removal.spec.js`
**期待結果**: テストが失敗する（実装前のため）
**Playwright確認**: テストの実行と失敗確認

### T006: 色変更のE2Eテスト作成
**目的**: 1分ごとの色変更機能のテスト
**ファイル**: `tests/e2e/color-change.spec.js`
**期待結果**: テストが失敗する（実装前のため）
**Playwright確認**: テストの実行と失敗確認

### T007: タイマー完了のE2Eテスト作成
**目的**: タイマー完了時の動作テスト
**ファイル**: `tests/e2e/timer-completion.spec.js`
**期待結果**: テストが失敗する（実装前のため）
**Playwright確認**: テストの実行と失敗確認

### T008: レスポンシブデザインのE2Eテスト作成
**目的**: 異なる画面サイズでの動作テスト
**ファイル**: `tests/e2e/responsive.spec.js`
**期待結果**: テストが失敗する（実装前のため）
**Playwright確認**: テストの実行と失敗確認

### T009: 新しいブロックシステムの実装
**目的**: 180個のブロック（60個×3セクション）の実装
**ファイル**: `src/js/blocks.js`
**期待結果**: 3つのセクションに60個ずつのブロックが表示される
**Playwright確認**: ブロックが正しく表示されることを確認

### T010: 1秒間隔のブロック削除機能実装
**目的**: 1秒ごとに1個のブロックが削除される機能
**ファイル**: `src/js/timer.js`, `src/js/controls.js`
**期待結果**: 1秒ごとにブロックが削除される
**Playwright確認**: ブロック削除の動作確認

### T011: 1分ごとの色変更機能実装
**目的**: 1分ごとにブロックの色が変わる機能
**ファイル**: `src/js/blocks.js`, `src/js/colors.js`
**期待結果**: 緑→オレンジ→赤の色変更が正しく動作
**Playwright確認**: 色変更の動作確認

### T012: タイマー状態管理の更新
**目的**: 新しいブロックシステムに対応した状態管理
**ファイル**: `src/js/timer.js`, `src/js/app.js`
**期待結果**: タイマー状態が正しく管理される
**Playwright確認**: タイマー状態の動作確認

### T013: ブロックアニメーションの実装
**目的**: ブロック削除時の滑らかなアニメーション
**ファイル**: `src/js/animations.js`, `styles.css`
**期待結果**: 60fpsの滑らかなアニメーション
**Playwright確認**: アニメーションの動作確認

### T014: 完了時の視覚・聴覚フィードバック実装
**目的**: タイマー完了時のフィードバック
**ファイル**: `src/js/animations.js`, `src/js/timer.js`
**期待結果**: 完了アニメーションと音声が再生される
**Playwright確認**: 完了フィードバックの動作確認

### T015: 幼稚園児向けの直感的なデザイン調整
**目的**: 子供が理解しやすいUI/UXの実装
**ファイル**: `styles.css`, `index.html`
**期待結果**: 直感的で分かりやすいデザイン
**Playwright確認**: デザインの動作確認

### T016: アクセシビリティ機能の実装
**目的**: スクリーンリーダーやキーボード操作への対応
**ファイル**: `index.html`, `src/js/controls.js`
**期待結果**: アクセシビリティ要件を満たす
**Playwright確認**: アクセシビリティの動作確認

### T017: レスポンシブデザインの最適化
**目的**: 様々なデバイスでの最適な表示
**ファイル**: `styles.css`
**期待結果**: デスクトップ・タブレット・スマートフォンで最適表示
**Playwright確認**: レスポンシブデザインの動作確認

### T018: エラーハンドリングとユーザーフィードバック
**目的**: エラー時の適切な処理とユーザーへの通知
**ファイル**: `src/js/app.js`, `src/js/controls.js`
**期待結果**: エラーが適切に処理され、ユーザーに通知される
**Playwright確認**: エラーハンドリングの動作確認

### T019: 全機能の統合テスト実行
**目的**: すべての機能が統合して正常に動作することを確認
**ファイル**: `tests/e2e/integration.spec.js`
**期待結果**: 全機能が統合して動作する
**Playwright確認**: 統合テストの実行と結果確認

### T020: パフォーマンステスト（60fps確認）
**目的**: アニメーションが60fpsで動作することを確認
**ファイル**: `tests/performance/animation.spec.js`
**期待結果**: 60fpsのアニメーション性能
**Playwright確認**: パフォーマンステストの実行

### T021: アクセシビリティテスト実行
**目的**: アクセシビリティ要件の最終確認
**ファイル**: `tests/accessibility/a11y.spec.js`
**期待結果**: アクセシビリティ要件を満たす
**Playwright確認**: アクセシビリティテストの実行

### T022: 異なるデバイスでの動作確認
**目的**: 様々なデバイスでの動作確認
**ファイル**: `tests/e2e/multi-device.spec.js`
**期待結果**: 全デバイスで正常動作
**Playwright確認**: マルチデバイステストの実行

### T023: ドキュメント更新とクリーンアップ
**目的**: ドキュメントの更新とコードのクリーンアップ
**ファイル**: `README.md`, 各種ドキュメント
**期待結果**: 最新のドキュメントとクリーンなコード
**Playwright確認**: 最終動作確認

## 依存関係
- テスト（T004-T008）は実装（T009-T014）より前に完了
- T009はT010-T011の前提
- T012はT013-T014の前提
- 実装はポリッシュ（T019-T023）より前に完了

## 並列実行例
```
# T004-T008を同時実行:
Task: "タイマー開始のE2Eテスト作成"
Task: "ブロック削除のE2Eテスト作成"
Task: "色変更のE2Eテスト作成"
Task: "タイマー完了のE2Eテスト作成"
Task: "レスポンシブデザインのE2Eテスト作成"
```

## チェック機能
各タスク完了後、以下のチェックを自動実行：
1. **Playwright MCP動作確認**: 実装した機能の動作確認
2. **期待結果との照合**: 仕様書との整合性確認
3. **エラーチェック**: コンソールエラーの確認
4. **パフォーマンスチェック**: 基本的な性能確認

## 注意事項
- [P]タスク = 異なるファイル、依存関係なし
- 実装前にテストが失敗することを確認
- 各タスク後にコミット
- 曖昧なタスク、同一ファイルの競合を避ける
